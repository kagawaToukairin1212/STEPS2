<% flash.each do |message_type, message| %>
  <div class="alert alert-<%= message_type %>">
    <%= message %>
  </div>
<% end %>

<div class="container my-5">
  <h1 class="text-center mb-4"><%= t('users.mypage.title') %></h1>

  <div class="row">
    <!-- 左側: レーダーグラフ -->
    <div class="col-md-6">
      <h2><%= t('users.mypage.radar_chart') %></h2>
      <div data-controller="radar-chart" data-sheets="<%= @radar_chart_data.to_json %>">
      <% @sheets.each_with_index do |sheet, index| %>
        <h3><%= sheet.title %></h3>
        <canvas id="radarChart-<%= index %>" width="400" height="400"></canvas>
      <% end %>  
      </div>

      <!-- 矢印ボタン -->
      <div class="text-center mt-3">
        <button id="prevBtn" class="btn btn-outline-primary">← 前へ</button>
        <button id="nextBtn" class="btn btn-outline-primary">次へ →</button>
      </div>
    </div>

    <!-- 右側: 目標表示 -->
    <div class="col-md-6">
      <h3>目標</h3>
      <div id="goalContent" class="border p-3 rounded bg-light"></div>
    </div>
  </div>

  <!-- リンク一覧 -->
  <div class="mt-5">
    <div class="list-group">
      <%= link_to t('users.mypage.add_sheet'), new_sheet_path, class: 'list-group-item list-group-item-action' %>
      <%= link_to t('users.mypage.change_goal'), '#', class: 'list-group-item list-group-item-action' %>

      <% @sheets.each do |sheet| %>
        <%= link_to t('users.mypage.enter_results', title: sheet.title), sheet_evaluation_scores_path(sheet), class: 'list-group-item list-group-item-action' %>
      <% end %>

      <% @sheets.each do |sheet| %>
        <%= link_to t('users.mypage.view_progress', title: sheet.title), sheet_path(sheet), class: 'list-group-item list-group-item-action' %>
      <% end %>

      <%= link_to t('users.mypage.download_graph'), '#', class: 'list-group-item list-group-item-action' %>
      <%= link_to t('users.mypage.delete_sheet'), '#', class: 'list-group-item list-group-item-action' %>
    </div>
  </div>

  <!-- デバッグ表示 -->
  <%= debug @radar_chart_data %>
</div>
